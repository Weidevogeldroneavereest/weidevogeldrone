<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>NFC Scan</title>
  <style>
    body { font-family: Arial, sans-serif; text-align: center; padding: 40px; }
  </style>
</head>
<body>
  <h2>📲 NFC Scan gestart...</h2>
  <p>Gegevens worden verzameld en verzonden naar Google Sheet...</p>

  <script>
    navigator.geolocation.getCurrentPosition(function(pos) {
      const data = {
        tagID: new URLSearchParams(window.location.search).get("tagID"),
        location: pos.coords.latitude + "," + pos.coords.longitude,
        device: navigator.userAgent
      };

      fetch("https://script.google.com/macros/s/AKfycbwhAiMb-z0BZ1o9EJy8bhtoeVLG-TVBH0zSyyt9sz_wbW54XdQz9leX9LQvCiFlJbt30g/exec", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(data)
      })
      .then(res => {
        document.body.innerHTML = "<h3>✅ Gegevens succesvol verzonden!</h3>";
      })
      .catch(err => {
        document.body.innerHTML = "<h3>❌ Fout bij verzenden.</h3><p>" + err + "</p>";
      });
    }, function(error) {
      document.body.innerHTML = "<h3>⚠️ Locatie niet beschikbaar.</h3><p>Toestemming geweigerd of geen GPS beschikbaar.</p>";
    });
  </script>
</body>
</html>
function doGet(e) {
  return ContentService.createTextOutput("📡 Web App klaar om gegevens via POST te ontvangen.");
}
