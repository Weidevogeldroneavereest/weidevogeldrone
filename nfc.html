<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>NFC Scan</title>
</head>
<body>
  <h2>Scan gestart...</h2>
  <p>Gegevens worden verzameld en verzonden...</p>

  <script>
    navigator.geolocation.getCurrentPosition(function(pos) {
      const data = {
        tagID: new URLSearchParams(window.location.search).get("tagID"),
        location: pos.coords.latitude + "," + pos.coords.longitude,
        device: navigator.userAgent
      };

      fetch("https://script.google.com/macros/s/AKfycbwhAiMb-z0BZ1o9EJy8bhtoeVLG-TVBH0zSyyt9sz_wbW54XdQz9leX9LQvCiFlJbt30g/exec", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(data)
      }).then(response => {
        document.body.innerHTML = "<h3>âœ… Gegevens verzonden!</h3>";
      }).catch(err => {
        document.body.innerHTML = "<h3>âŒ Er ging iets mis.</h3>";
      });
    }, function(error) {
      document.body.innerHTML = "<h3>âš ï¸ Locatie niet beschikbaar.</h3>";
    });
  </script>
</body>
</html>
function doGet(e) {
  return ContentService.createTextOutput("ğŸ“¡ Web App klaar om gegevens via POST te ontvangen.");
}
